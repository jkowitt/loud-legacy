[build]
base = "apps/loud-legacy-web"
command = "npm install && npm run build"
publish = ".next"

[build.environment]
NODE_VERSION = "20"
NEXT_TELEMETRY_DISABLED = "1"
NEXT_DISABLE_SWC_WASM = "1"
# Disable secrets scanner - Google Maps API keys are intentionally public (restricted in GCP)
SECRETS_SCAN_SMART_DETECTION_ENABLED = "false"

# Production branch deployment
[context.production]
command = "npm install && npm run build"

# Branch deploys (deploy previews for all branches)
[context.branch-deploy]
command = "npm install && npm run build"

# Deploy previews for pull requests
[context.deploy-preview]
command = "npm install && npm run build"

# Netlify plugin for Next.js
[[plugins]]
package = "@netlify/plugin-nextjs"
